# 1 安装

安装极其简单，Windows下用msi安装一路下一步就可以了。

## 1.1 zip安装

### ①PATH环境变量

把go.exe所在的`<install_dir>\go\bin`目录添加到PATH环境变量中。

例如，我添加的是`C:\DevelopKits\go\bin`

### ②GOPATH环境变量

> 我设置的是`C:\Users\C\go`

这个变量指向的目录，用于存放源代码、包、编译后的程序，即在此目录下，应有以下三个目录：

- src（名字限定，至少有这个目录）
- pkg（名字限定，可以没有这个目录）
- bin（名字限定，可以没有这个目录）

当然，如果你在别处写go代码，也可以用`go build`、`go run`编译源文件、运行包。

但是，如果要使用`go install`命令，则会把编译后的二进制程序安装到bin目录下。

### ③*GOROOT环境变量

在linux或者mac操作系统中没有像Windows的PATH环境变量，所以要自己设置go.exe的路径，即设置GOROOT环境变量。

- macOS

    - ```bash
        # ~/.bash_profile
        GOROOT=/usr/local/go
        export GOROOT
        ```

- linux

    - 略。

注意，这个是go的安装路径，而go的可执行程序则在GOROOT下的bin目录。

``` BASH
export $PATH:$GOROOT/bin
```

# 2 运行

使用`go run`命令，对当前目录下的go文件进行编译立即执行，不生成可执行程序。

# 3 编译

## 3.1 go install

`go install`和`go install <包名>`的区别

前者是将当前目录作为一个包，编译安装到"GOPATH/bin"下。

后者按"GOROOT/src" > "GOPATH/src"的顺序寻找包，然后编译、安装到"GOPATH/bin"下。

### 注意A

如果是`go install`，如果当前目录并不是`GOPATH/src/<包>`下，那么就会报错。

``` bash
D:\Code\go-workshop\001-入门\helloworld> go install
go install: no install location for directory D:\Code\go-workshop\001-入门\helloworld outside GOPATH
        For more details see: 'go help gopath'
```

意思是当前目录"D:\Code\go-workshop\001-入门\helloworld"并没有在GOPATH中，也不是标准目录组织（没有src目录）。go install命令要求当前目录是位于GOPATH下src目录中的包目录内。例如`%GOPATH%\src\helloworld`

`go install`命令在`%GOPATH%\bin`下生成与包目录名一致的可执行文件，记住是**目录名。**

> 尽管目录名和源代码内的package <包名>应一致，但是main包有特殊的用途。
>
> 这点在之后包的详细笔记会展开，现在还没学到。

### 注意B

`go install 包名`这个命令，除了"GOROOT/src" > "GOPATH/src"这两个地方外，别的地方的包都不认。

例子：

``` BASH
D:\Code\go-workshop\001-入门> go install helloworld
can't load package: package helloworld: cannot find package "helloworld" in any of:
        C:\DevelopKits\go\src\helloworld (from $GOROOT)
        C:\Users\C\go\src\helloworld (from $GOPATH)
```

尽管`001-入门`这个文件夹下是有`helloworld`这个文件夹的。

## 3.2 go build

编译命令，后接编译文件的路径。例如

```bash
go build ./helloworld.go
```

会在源文件同级别目录下生成一个可执行文件（不知道有没有参数更改到别的地方呢？）。

go build和go install生成不太一样。

如果指定了具体文件名，它生成的可执行程序和**源文件**的名称一样，而不是和**包目录名**一样。

如果在包文件夹内直接`go build`，那么生成的可执行文件和**包目录名**一样。

1. 如果是普通包，不会产生任何文件
2. 如果是main包，会生成可执行程序文件
3. 如果要修改输出位置和名称，需要加入-o参数
4. go build不指定文件，会默认编译当前目录下所有文件